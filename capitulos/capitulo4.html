<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Usando Animaciones</title>

    <!-- Bootstrap CSS -->
    <link href="../lib/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/capitulosCSS/capitulo1.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    
    <link rel="shortcut icon" href="../img/index/alienIcon.png">


    <body>
        <!--Nav bar -->
        <nav class="navbar navbar-inverse navbar-fixed-top device-fixed-height">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div id="navbar" class="collapse navbar-collapse device-fixed-width">
                    <ul class="nav navbar-nav">
                        <li><a href="../index.html">Inicio</a>
                        </li>
                        <li>
                            <a href="../tutorialesBasico.html">Índice</a>
                        </li>
                        </li>
                        <li><a href="../contact.html">Contacto</a>
                        </li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </nav>
        <!--Nav bar end-->


        <div class="container afternav">
            <h1>Capítulo 4 - Animaciones</h1>
            <p>
               En este capítulo comenzaremos a usar animaciones, aprenderemos que estas son Aciones en cocos y veremos cómo crearlas y usarlas juntos con otras acciones. Descarga la carpeta Resources para este capítulo <a href="../img/capitulo4/Resources4.1.zip">aquí</a>
            </p>
            <h2>4.1 Usando Animaciones</h2>
            <p>
                Ahora vamos a crear las clases Player y BasicEnemy ambas harán uso de animaciones, en este punto ambas clases serán idénticas, tan sólo varía el recurso que utilizan así que solo veremos una de ellas, en lugar de emplear herencia, se harán en clases separadas porque en el futuro será necesario. Veamos entonces como usar animaciones.
            </p>
            <h3>Player.h</h3>
            <iframe  src="../img/capitulo4/Player.h.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
            <h3>Player.cpp</h3>
            <iframe  src="../img/capitulo4/Player.cpp.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
            <br/><br/>
            <p>
                Como vemos hacemos que Player herede de Sprite y colocamos en  su método init aquello que queremos que haga al crearse. En nuetro caso crearemos dos animaciones, Una para el esatado normal del jugador y otra para cuando este es destruido.
            </p>
            <p>
                En el método <strong>createIdleAnimation()</strong> creamos la animación por defecto, para ello creamos un vector en el que añadir los diferentes SpriteFrames que compondrán la animación.
                Para crear estos Sprite frames cogemos cada una de las secciones de nuestro sprite sheet.
            </p>
            <p>
                Nuestro sprite sheet contiene 4 imágenes (4 frames) y mide 200x63 por lo que para obtener cada uno de ellos debemos decirle a cocos desde donde hasta donde mide cada frame y eso lo indicamos así: <strong>SpriteFrame::create("animacion_nave.png", Rect(acc, 0, 50, 63))</strong>. Como vemos acc es donde comienza el frame en cuestión, 0 la altura a la que comienza, 50 el ancho de cada frame y 63 la altura. Una vez obtenidos todos los frames de nuestro sprite sheet, creamos la animación <strong>auto animation = Animation::createWithSpriteFrames(animFrames, 0.25f)</strong> aquí decimos que nuestra animación se compone de este vector de frames y que entre cada frame deben pasar 0.25s.
            <p/>
            <p>
                Cuando tenemos la animación, procedemos a crear la acción de animarla <strong>auto animate = Animate::create(animation)</strong> con esto ya tendríamos una animación que se ejecutaría una vez, sin embargo nos interesa que se repita todo el tiempo hasta que la destruyamos por ello creamos una ación derivada <strong>_idleAnimation = RepeatForever::create(animate)</strong>.
            </p> 
                       
            <p>
                Ya tenemos nuestras animaciones, ahora lanzaremos la animación por defecto que será la IDLE. <strong>runAction(_idleAnimation)</strong>. El proceso de creación es idéntico para la animación de la explosión y para las animaciones de los enemigos solo que pueden variar los tamaños, según el Sprite sheet que se usa.
            </p>

            <div class="bs-callout bs-callout-warning" id="callout-dropdown-positioning">
                <h4 id="may-require-additional-positioning">Advertencia<a class="anchorjs-link" href="#may-require-additional-positioning"><span class="anchorjs-icon"></span></a></h4>
                <p>
                    En estas clases (Player y BasicEnemy) hay errores relacionados con la forma en que cocos gestiona la memoria introducidos de forma deliberada, para ver cómo solucionarlos más adelante (capítulo 6). Por ahora basta con dejarlo así.
                </p>
            </div>
            <div class="bs-callout bs-callout-warning" id="callout-dropdown-positioning">
                <p>
                        Prueba a posicionar un objeto BasicEnemy y un Player en tu GameLayer y verás que están animados sin necesidad de llamar a su método update que actualmente no hace nada, ya añadiremos funcionalidad más tarde.
                </p>
            </div>
            <center><img class="img-rounded " src="../img/capitulo4/enemy_player_positionated.png" alt="enenmigo y jugador posicionados en el GameLayer" style="width:300px;"/><br/></center><br/>
            <p>
                Descarga las carpetas Classes y resources del proyecto hasta el momento <a href="../img/capitulo4/SkyHunter4.1.zip">aquí</a>.
            </p>
            <!-- end container -->
        </div>

        <!-- next chapter link -->
        <div>
            <br/>
            <center>
                <a  href="capitulo3.html" >
                    <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Capítulo anterior
                </a>
                |
                <a  href="capitulo5.html" >
                    Capítulo siguiente <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> 
                </a>
            </center>
            <br/>
        </div>


        <!-- BOOTSTRAP CORE JS -->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="../js/jquery-1.11.1.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="../lib/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
        <script>
            // from https://signalvnoise.com/posts/2407-device-scale-user-interface-elements-in-ios-mobile-safari
            function getDeviceScale() {
                var deviceWidth, landscape = Math.abs(window.orientation) == 90;
                if (landscape) {
                  // iPhone OS < 3.2 reports a screen height of 396px
                  deviceWidth = Math.max(480, screen.height);
                } else {
                  deviceWidth = screen.width;
                }
                return window.innerWidth / deviceWidth;
            }

            // mobile only - keep the position:fixed header at constant size when page is zoomed
            if (navigator.userAgent.match(/Mobi/)) {
                $(window).on('load scroll', function() {
                    var ds = getDeviceScale();
                    $('.device-fixed-height').css('transform','scale(1,' + ds + ')')
                        .css('transform-origin', '0 0');
                    $('.device-fixed-width').css('transform', 'scale(' + ds + ',1)')
                        .css('transform-origin', '0 0');
                    })
            }
        </script>
         <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-63954706-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>

</html>