<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Usando Sprites</title>

    <!-- Bootstrap CSS -->
    <link href="../lib/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/capitulosCSS/capitulo1.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    
    <link rel="shortcut icon" href="../img/index/alienIcon.png">


    <body>
        <!--Nav bar -->
        <nav class="navbar navbar-inverse navbar-fixed-top device-fixed-height">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div id="navbar" class="collapse navbar-collapse device-fixed-width">
                    <ul class="nav navbar-nav">
                        <li><a href="../index.html">Inicio</a>
                        </li>
                        <li>
                            <a href="../tutorialesBasico.html">Índice</a>
                        </li>
                        <li><a href="../contact.html">Contacto</a>
                        </li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </nav>
        <!--Nav bar end-->


        <div class="container afternav">
            <h1>Capítulo 2 - Usando Sprite y configurando la pantalla</h1>
            <p>
                En este capítulo comenzaremos el desarrollo del juego SkyHunter, aprenderemos a configurar la pantalla y a usar Sprites. En cada apartado se proveerá un link de descarga de las clases y recursos usados, se recomienda al final de cada capítulo descargar y colocar esas clases en la carpeta Classes de tu proyecto para compilar sin problemas.
            </p>
            <h2>2.1 Configuración de pantalla </h2>
            <p>
                Tras crear el proyecto, lo primero que haremos será borrar el contenido de nuestra clase HelloWorldScene.cpp y HelloWorldScene.h hasta dejarlos como veremos a continuación y posteriormente renombrarlos como GameLayer.cpp y GameLayer.h respectivamente.
                <h3>GameLayer.h</h3>
                <iframe  src="../img/capitulo2/GameLayer.h.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
                <br/>
                <h3>GameLayer.cpp</h3>
                <iframe  src="../img/capitulo2/GameLayer.cpp.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
            </p>
            
            <p>
                Una vez hecho esto, configuraremos la pantalla del juego.<br/>
                Como será un juego para móvil en orientación portrait (vertical), le diremos a cocos que nos muestre una pantalla de ese formato. En mi caso como tengo un Sony Xperia U, le diré a cocos que quiero una ventana de 480x854 <strong>glview->setFrameSize(480, 854)</strong> con esta directiva en AppDelegate.cpp. Si quisiéramos un juego con esta misma resolución en landscape (como si girásemos el móvil) basta con indicar 854x480. Si ejecutamos esto es lo que deberíamos de ver:

                <br/><br/>
                <img class="img-rounded mobile" src="../img/capitulo2/screen.png" alt="solucion visual studio" style="width:100%;"/><br/>
                <br/>
                Como vemos añado una comparación antes de cambiar el tamaño de la pantalla <strong>CC_TARGET_PLATFORM == CC_PLATFORM_WIN32</strong> para que el tamaño de pantalla que muestre cocos sea alterado solo si estamos desarrollando en win32 en este caso. Una vez lanzado en el móvil, este cambio no será efectivo.
            </p>
            <p>
                La última modificación que haremos en esta clase será para decirle a cocos la resolución para la cual fue diseñado nuestro juego y de esta forma el framework automáticamente escalará las imágenes para adaptarlas a la pantalla sobre la que el juego se ejecuta.<br/>
                El juego está diseñado para una resolución de 320x480 y así se lo indicamos a cocos <strong>glview->setDesignResolutionSize(DESING_WIDTH, DESING_HEIGHT, ResolutionPolicy::EXACT_FIT)</strong> con <strong>ResolutionPolicy::EXACT_FIT</strong> le decimos que escale las imágenes para ocupar el total de la pantalla teniendo en cuenta la resolución para la que están diseñadas.<br/>
                Tras todo esto nuestra clase AppDelagate debe de quedar así:

                <br/>
                <h3>AppDelegate.h</h3>
                <iframe  src="../img/capitulo2/AppDelegate.h.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
                <h3>AppDelegate.cpp</h3>
                <iframe  src="../img/capitulo2/AppDelegate.cpp.html" width="100%" height="300px">Your Browser doesn't support Frames.</iframe>
                <br/><br/>Si has llegado hasta aquí, ya tienes tu aplicación configurada para comenzar a desarrollar. A partir de aquí, trabajaremos con Sprites y otros componentes, principalmente en nuestra clase <strong>GameLayer.cpp</strong>. Puedes descargar el código de la aplicación hasta el momento <a href="../img/capitulo2/Classes3.1.zip">aquí</a> y los recursos para el siguiente apartado <a href="../img/capitulo2/recursos.zip">aquí</a>.
            </p>
            
            <!-- end container -->
        </div>

        <!-- next chapter link -->
        <div>
            <br/>
            <center>
                <a  href="capitulo1windows.html" >
                    <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Capítulo anterior
                </a>
                |
                <a  href="capitulo3.html" >
                    Capítulo siguiente <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> 
                </a>
            </center>
            <br/>
        </div>


        <!-- BOOTSTRAP CORE JS -->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="../js/jquery-1.11.1.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="../lib/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
        <script>
            // from https://signalvnoise.com/posts/2407-device-scale-user-interface-elements-in-ios-mobile-safari
            function getDeviceScale() {
                var deviceWidth, landscape = Math.abs(window.orientation) == 90;
                if (landscape) {
                  // iPhone OS < 3.2 reports a screen height of 396px
                  deviceWidth = Math.max(480, screen.height);
                } else {
                  deviceWidth = screen.width;
                }
                return window.innerWidth / deviceWidth;
            }

            // mobile only - keep the position:fixed header at constant size when page is zoomed
            if (navigator.userAgent.match(/Mobi/)) {
                $(window).on('load scroll', function() {
                    var ds = getDeviceScale();
                    $('.device-fixed-height').css('transform','scale(1,' + ds + ')')
                        .css('transform-origin', '0 0');
                    $('.device-fixed-width').css('transform', 'scale(' + ds + ',1)')
                        .css('transform-origin', '0 0');
                    })
            }
        </script>
         <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-63954706-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>

</html>